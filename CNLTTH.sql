CREATE DATABASE QUANLY_KHACHSAN_CNLTTH
GO
USE QUANLY_KHACHSAN_CNLTTH
GO

CREATE TABLE VATTU
(
	MA_VT INT PRIMARY KEY IDENTITY,
	TEN NVARCHAR(50),
	GIA FLOAT,
	STATUS INT
)
GO
CREATE TABLE LOAIPHONG
(
	MA_LP INT PRIMARY KEY IDENTITY,
	GIA FLOAT,
	SONGUOI INT,
	STATUS INT
)
GO
CREATE TABLE CHITIETVATTU
(
	MA_VT INT REFERENCES dbo.VATTU(MA_VT),
	MA_LP INT REFERENCES dbo.LOAIPHONG(MA_LP),
	SOLUONG INT,
	STATUS INT
)

GO

CREATE TABLE LOAIDICHVU
(
	MA_LDV INT PRIMARY KEY IDENTITY,
	LOAIDICHVU VARCHAR(10),
	HESOGIA FLOAT,
	STATUS INT
)
GO
CREATE TABLE DICHVU
(
	MA_DV INT PRIMARY KEY IDENTITY,
	MA_LDV INT REFERENCES dbo.LOAIDICHVU(MA_LDV),
	TEN NVARCHAR(100),
	GIA FLOAT,
	DONVITINH VARCHAR(10),
	STATUS INT
)
GO

CREATE TABLE PHONG
(
	MA_P INT PRIMARY KEY IDENTITY,
	MA_LP INT REFERENCES dbo.LOAIPHONG(MA_LP),
	TRANGTHAI NVARCHAR(50),
	STATUS INT
)
GO
CREATE TABLE KHACHHANG
(
	MA_KH INT PRIMARY KEY IDENTITY,
	HOTEN NVARCHAR(50),
	GIOITINH BIT,
	CMT CHAR(9),
	DIACHI NVARCHAR(50),
	SDT VARCHAR(11),
	EMAIL VARCHAR(50),
	STATUS INT
)
GO
CREATE TABLE PHIEUDATPHONG
(
	MA_PDP INT PRIMARY KEY IDENTITY,
	MA_KH INT REFERENCES dbo.KHACHHANG(MA_KH),
	NGAYDEN DATETIME,
	NGAYDI DATETIME,
	TIENDATCOC FLOAT,
	USERNAME NVARCHAR(50),
	TINHTRANG NVARCHAR(50),
	SONGUOI INT,
	STATUS INT
)
GO
CREATE TABLE CHITIETDATPHONG
(
	MA_PDP INT REFERENCES dbo.PHIEUDATPHONG(MA_PDP),
	MA_P INT REFERENCES dbo.PHONG(MA_P),
	STATUS INT
)
GO


CREATE TABLE CHITIETDICHVU
(
	MA_DV INT REFERENCES dbo.DICHVU(MA_DV),
	MA_PDP INT REFERENCES dbo.PHIEUDATPHONG(MA_PDP),
	SOLUONG INT,
	STATUS INT
)
GO

CREATE TABLE NHANVIEN
(
	MA_NV INT PRIMARY KEY IDENTITY,
	HOTEN NVARCHAR(50),
	NGAYSINH DATE,
	GIOITINH BIT,
	DIACHI NVARCHAR(50),
	SDT VARCHAR(11),
	CHUCVU NVARCHAR(50),
	STATUS INT
)
GO
CREATE TABLE HETHONG
(
	USENAME VARCHAR(50) PRIMARY KEY,
	MA_NV INT REFERENCES dbo.NHANVIEN(MA_NV),
	PASSWORD VARCHAR(50),
	STATUS INT
)

GO
CREATE TABLE HOADON
(
	MA_HD INT  PRIMARY KEY IDENTITY,
	NGAYTHANHTOAN DATETIME,
	TONGTIEN FLOAT,
	MA_PDP INT REFERENCES dbo.PHIEUDATPHONG(MA_PDP),
	MA_KH INT REFERENCES dbo.KHACHHANG(MA_KH),
	USERNAME VARCHAR(50) REFERENCES dbo.HETHONG(USENAME),
	STATUS INT
)
GO
ALTER TABLE dbo.PHONG ADD name CHAR(10)

--INSERT BANG VATTU
GO

INSERT dbo.VATTU(  TEN, GIA, STATUS  ) VALUES (N'Bàn ủi',5.0000,1)
INSERT dbo.VATTU(  TEN, GIA, STATUS  ) VALUES ( N'Giường Đôi',2000.0000,1)
INSERT dbo.VATTU( TEN, GIA , STATUS ) VALUES (N'Giường Đơn',1500.0000,1)
INSERT dbo.VATTU(  TEN, GIA, STATUS  ) VALUES ( N'Máy Lạnh',12000.0000,1)
INSERT dbo.VATTU(  TEN, GIA , STATUS ) VALUES (N'Quạt',200.0000,1)
INSERT dbo.VATTU( TEN, GIA, STATUS  ) VALUES (N'Tivi',20000.0000,1)
INSERT dbo.VATTU(  TEN, GIA , STATUS ) VALUES ( N'Tủ Lạnh',2000.0000,1)
--INSERT BANG LOAIPHONG

GO
INSERT dbo.LOAIPHONG(  GIA, SONGUOI, STATUS  ) VALUES ( 20000.0000, 3,1)
INSERT dbo.LOAIPHONG(  GIA, SONGUOI , STATUS ) VALUES ( 30000.0000, 5,1)
INSERT dbo.LOAIPHONG( GIA, SONGUOI , STATUS ) VALUES ( 40000.0000, 2,1)
INSERT dbo.LOAIPHONG(  GIA, SONGUOI , STATUS ) VALUES ( 50000.0000, 4,1)

--INSERT BANG CHITIETVATTU
GO

INSERT dbo.CHITIETVATTU(  MA_VT,MA_LP, SOLUONG , STATUS ) VALUES ( 2,1, 2,1)
INSERT dbo.CHITIETVATTU( MA_VT, MA_LP, SOLUONG , STATUS ) VALUES ( 4,3, 1,1)
INSERT dbo.CHITIETVATTU(  MA_VT,MA_LP, SOLUONG , STATUS ) VALUES ( 6,4, 2,1)
INSERT dbo.CHITIETVATTU( MA_VT, MA_LP, SOLUONG , STATUS ) VALUES ( 7,1, 5,1)
INSERT dbo.CHITIETVATTU( MA_VT, MA_LP, SOLUONG , STATUS ) VALUES ( 5,2, 3,1)
INSERT dbo.CHITIETVATTU( MA_VT, MA_LP, SOLUONG , STATUS ) VALUES (3,3, 1,1)
INSERT dbo.CHITIETVATTU( MA_VT,MA_LP, SOLUONG , STATUS ) VALUES (3,4, 5,1)
INSERT dbo.CHITIETVATTU( MA_VT, MA_LP, SOLUONG , STATUS ) VALUES (4, 1, 4,1)
INSERT dbo.CHITIETVATTU( MA_VT, MA_LP, SOLUONG , STATUS ) VALUES ( 1,4, 2,1)
INSERT dbo.CHITIETVATTU( MA_VT, MA_LP, SOLUONG , STATUS ) VALUES ( 3,1, 1,1)
INSERT dbo.CHITIETVATTU( MA_VT, MA_LP, SOLUONG , STATUS ) VALUES ( 3,2, 1,1)
INSERT dbo.CHITIETVATTU( MA_VT, MA_LP, SOLUONG , STATUS ) VALUES ( 6,4, 5,1)
INSERT dbo.CHITIETVATTU( MA_VT,MA_LP, SOLUONG , STATUS ) VALUES ( 6,2, 1,1)

--INSERT BANG LOAI DICH VU
GO 
INSERT dbo.LOAIDICHVU(  LOAIDICHVU, HESOGIA , STATUS) VALUES  (  'Thường', 1.0,1)
INSERT dbo.LOAIDICHVU( LOAIDICHVU, HESOGIA , STATUS) VALUES  (  'Vip', 2.0,1)
INSERT dbo.LOAIDICHVU(LOAIDICHVU, HESOGIA , STATUS) VALUES  (  'Ttrungbinh', 1.5,1)

--INSERT BANG DICH VU
GO
INSERT dbo.DICHVU (  MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (1, N'Điểm Tâm', 15000.0000, N'phần',1)
INSERT dbo.DICHVU (  MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (2, N'Điểm Tâm', 30000.0000, N'phần',1)
INSERT dbo.DICHVU (  MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (1, N'Cơm trưa', 10000.0000, N'phần',1)
INSERT dbo.DICHVU (  MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (2, N'Cơm trưa', 20000.0000, N'phần',1)
INSERT dbo.DICHVU ( MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (1, N'Cocacola lon', 3500.0000, N'lon',1)
INSERT dbo.DICHVU ( MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (2, N'Cocacola lon', 7000.0000, N'lon',1)
INSERT dbo.DICHVU (  MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (1, N'Cocacola chai', 5000.0000, N'chai',1)
INSERT dbo.DICHVU (  MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (2, N'Cocacola chai', 10000.0000, N'chai',1)
INSERT dbo.DICHVU (  MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (1, N'Giặt Ủi', 5000.0000, N'kg',1)
INSERT dbo.DICHVU (  MA_LDV, TEN, GIA, DONVITINH , STATUS) VALUES (1, N'Lavie', 6000.0000, N'chai',1)

--INSERT BANG PHONG
GO

INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS) VALUES (1,'trống',1)
INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS ) VALUES (2,'trống',1)
INSERT dbo.PHONG (MA_LP, TRANGTHAI, STATUS ) VALUES (4,'đã thuê',1)
INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS ) VALUES (3,'đã thuê',1)
INSERT dbo.PHONG (MA_LP, TRANGTHAI, STATUS ) VALUES (2,'trống',1)
INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS) VALUES (4,'đã thuê',1)
INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS) VALUES (3,'đã thuê',1)
INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS ) VALUES (4,'đã thuê',1)
INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS) VALUES (2,'đã thuê',1)
INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS) VALUES (1,'đã thuê',1)
INSERT dbo.PHONG (MA_LP, TRANGTHAI, STATUS) VALUES (2,'trống',1)
INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS) VALUES (3,'trống',1)
INSERT dbo.PHONG (MA_LP, TRANGTHAI, STATUS) VALUES (4,'trống',1)
INSERT dbo.PHONG (MA_LP, TRANGTHAI, STATUS ) VALUES (1,'trống',1)
INSERT dbo.PHONG ( MA_LP, TRANGTHAI, STATUS ) VALUES (2,'trống',1)



--INSERT BANG KHACHHANG
GO
INSERT dbo.KHACHHANG( HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'Nguyễn Minh Phương', 1, N'98765432', N'Long An',  N'987654567', N'minhphuong12@sedff',1)
INSERT dbo.KHACHHANG( HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'Thành Lương', 1, N'98765432', N'Long An', N'987654567', N'minhphuong12@sedff',1)
INSERT dbo.KHACHHANG( HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'Nguyễn Thị Mai', 0, N'3566767788', N'123 Lý Chính Thắng, Q.3',  N'232323', N'mrjone_07@yahoo.com',1)
INSERT dbo.KHACHHANG( HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'hung', 1, N'999990091', N'Lý Thường Kiệt, Quận 11',  N'0902685483', N'mrjone_07@yahoo.com',1)
INSERT dbo.KHACHHANG( HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'Trọng Hoàng', 1, N'123456', N'Nghệ An', N'43464', N'mrjone_07@yahoo.com',1)
INSERT dbo.KHACHHANG( HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'Tâm', 1, N'2323434', N'Cao Lỗ',  N'012234', N'asasdsff',1)
INSERT dbo.KHACHHANG( HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'Tý', 1, N'2323434', N'Cao Lỗ', N'012234', N'asasdsff',1)
INSERT dbo.KHACHHANG(HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'Mai Xuân Hợp', 1, N'3566767788', N'123 Lý Chính Thắng, Q.3', N'232323', N'mrjone_07@yahoo.com',1)
INSERT dbo.KHACHHANG( HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'Trần Văn H', 1, N'6676', N'123 Lý Chính Thắng, Q.3',  N'232323', N'mrjone_07@yahoo.com',1)
INSERT dbo.KHACHHANG( HOTEN ,GIOITINH ,CMT ,DIACHI ,SDT ,EMAIL, STATUS) VALUES ( N'Nguyễn Văn Lang', 1, N'123456789', N'Phạm Thế Hiển', N'234567', N'mrjone_07@yahoo.com',1)




--INSERT BANG NHANVIEN
GO
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Đặng Văn Hùng', CAST(0x0000803400000000 AS DateTime), 1, N'45/36/27/2 Cao Lỗ, P.4, Q.8', N'01267064050', N'Bảo vệ',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Lý Tuyết Mai', CAST(0x00007EF500000000 AS DateTime), 0, N'123 Lý Thường Kiệt, P.6, Q.5', N'098562898', N'Nhân viên',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Nguyễn Thị Kiều Mai', CAST(0x0000726300000000 AS DateTime), 0, N'234 Lý Thái Tổ, Quận 1, TP Hồ Chí Minh', N'098562898', N'Nhân viên',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Lý Thị Tuyết Sương', CAST(0x0000787D00000000 AS DateTime), 0, N'234 Lê Văn Lương, Quận 7, TP Hồ Chí Minh', N'098562898', N'Nhân viên',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Nguyễn Thị Kim', CAST(0x0000726300000000 AS DateTime), 0, N'234 Lý Thái Tổ, Quận 1, TP Hồ Chí Minh', N'098562898', N'Nhân viên',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Bùi Khắc Tuấn', CAST(0x0000851200C4B33C AS DateTime), 1, N'234 Lê Văn Sỹ, Quận 7, TP Hồ Chí Minh', N'098562898', N'Nhân viên',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES (N'Lê Thị Huyền', CAST(0x0000851200C1249A AS DateTime), 0, N'234 Lê Văn Sỹ, Quận 7, TP Hồ Chí Minh', N'098562898', N'Quản lý',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Văn Mai Hương ', CAST(0x00007EF200000000 AS DateTime), 1, N'wswswsw', N'0907876426', N'Quản lý',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Cao Văn Nam', CAST(0x0000724600000000 AS DateTime), 1, N'234 Lê Văn Lương, Quận 7, TP Hồ Chí Minh', N'098562898', N'Quản lý',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Trần Thanh Hậu', CAST(0x0000803400000000 AS DateTime), 1, N'45//36/27/2 Cao Lỗ, Quận 8, TP Hồ Chí Minh', N'01267064050', N'Quản lý',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Ngô Tâm Ca', CAST(0x00007F1800000000 AS DateTime), 1, N'Âu Dương Lân, Quận 8', N'123214242', N'Quản lý',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Cao Văn Nam', CAST(0x0000724600000000 AS DateTime), 1, N'234 Lê Văn Lương, Quận 7, TP Hồ Chí Minh', N'098562898', N'Quản lý',1)
INSERT dbo.NHANVIEN( HOTEN , NGAYSINH ,GIOITINH , DIACHI ,SDT ,CHUCVU, STATUS) VALUES ( N'Lý Tuyết Mai', CAST(0x00007EF500000000 AS DateTime), 0, N'123 Lý Thường Kiệt, P.6, Q.5', N'098562898', N'Nhân viên',1)

--INSERT BANG HETHONG

GO
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD )  VALUES (N'HT01', 1, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT02', 2, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT03', 7, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT04', 10, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT05', 6, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT06', 8, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT07', 5, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT08', 3, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'admin',4, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT10', 1, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT11', 6, N'admin')
INSERT dbo.HETHONG ( USENAME, MA_NV, PASSWORD ) VALUES (N'HT12', 11, N'admin')
--INSERT BANG PHIEUDATPHONG
GO 
INSERT dbo.PHIEUDATPHONG( MA_KH ,NGAYDEN ,NGAYDI ,TIENDATCOC , USERNAME ,TINHTRANG ,SONGUOI ) VALUES ( 1, CAST(0x00009EC50083C866 AS DateTime), CAST(0x00009EC50083C7F0 AS DateTime), 1.0000, N'HT001', N'finish', 1)
INSERT dbo.PHIEUDATPHONG( MA_KH ,NGAYDEN ,NGAYDI ,TIENDATCOC , USERNAME ,TINHTRANG ,SONGUOI ) VALUES ( 3, CAST(0x00009EC60083C7F0 AS DateTime), CAST(0x00009EC60083C7F0 AS DateTime), 1.0000, N'admin', N'waitting', 1)
INSERT dbo.PHIEUDATPHONG( MA_KH ,NGAYDEN ,NGAYDI ,TIENDATCOC , USERNAME ,TINHTRANG ,SONGUOI ) VALUES ( 5, CAST(0x00009ED30083C7F0 AS DateTime), CAST(0x00009ED30083C7F0 AS DateTime), 1.0000, N'admin', N'waitting', 1)
INSERT dbo.PHIEUDATPHONG( MA_KH ,NGAYDEN ,NGAYDI ,TIENDATCOC , USERNAME ,TINHTRANG ,SONGUOI ) VALUES ( 4, CAST(0x00009EC500866BF7 AS DateTime), CAST(0x00009EC500866AF0 AS DateTime), 1.0000, N'HT002', N'finish', 1)
INSERT dbo.PHIEUDATPHONG( MA_KH ,NGAYDEN ,NGAYDI ,TIENDATCOC , USERNAME ,TINHTRANG ,SONGUOI ) VALUES (7, CAST(0x00009EC600866AF0 AS DateTime), CAST(0x00009EC600866AF0 AS DateTime), 1.0000, N'admin', N'waitting', 1)
INSERT dbo.PHIEUDATPHONG( MA_KH ,NGAYDEN ,NGAYDI ,TIENDATCOC , USERNAME ,TINHTRANG ,SONGUOI ) VALUES ( 6, CAST(0x00009EC5009DF67D AS DateTime), CAST(0x00009EC7009DF5E4 AS DateTime), 9.0000, N'Ht003', N'finish', 8)
 
 --INSERT BANG CHITIETDATPHONG
GO
INSERT dbo.CHITIETDATPHONG( MA_PDP, MA_P ) VALUES (1,1)
INSERT dbo.CHITIETDATPHONG( MA_PDP, MA_P ) VALUES (2, 2)
INSERT dbo.CHITIETDATPHONG( MA_PDP, MA_P ) VALUES (3, 3)
INSERT dbo.CHITIETDATPHONG( MA_PDP, MA_P ) VALUES (4, 4)
INSERT dbo.CHITIETDATPHONG( MA_PDP, MA_P ) VALUES (5, 5)



-- INSERT BANG CHITIETDICHVU
GO 
INSERT dbo.CHITIETDICHVU ( MA_DV, MA_PDP ,soluong) VALUES  ( 1,2,1)
INSERT dbo.CHITIETDICHVU ( MA_DV, MA_PDP,soluong ) VALUES  (2,4,1)
INSERT dbo.CHITIETDICHVU ( MA_DV, MA_PDP ,soluong) VALUES  ( 4,1,1)
INSERT dbo.CHITIETDICHVU ( MA_DV, MA_PDP ,soluong) VALUES  ( 5,3,1)
INSERT dbo.CHITIETDICHVU ( MA_DV, MA_PDP ,soluong) VALUES  ( 6,6,1)
INSERT dbo.CHITIETDICHVU ( MA_DV, MA_PDP ,soluong) VALUES  ( 3,5,1)
GO


--INSERT HOADON
GO
INSERT dbo.HOADON(NGAYTHANHTOAN , TONGTIEN ,MA_PDP , MA_KH ,USERNAME) VALUES ( CAST(0x00009EC500843F9A AS DateTime), 19999.0000, 1, 1, N'HT01')
INSERT dbo.HOADON(NGAYTHANHTOAN , TONGTIEN ,MA_PDP , MA_KH ,USERNAME) VALUES ( CAST(0x00009EC50086B8AD AS DateTime), 19999.0000, 2, 2, N'HT03')
INSERT dbo.HOADON(NGAYTHANHTOAN , TONGTIEN ,MA_PDP , MA_KH ,USERNAME) VALUES ( CAST(0x00009EC5009E7BFF AS DateTime), 249991.0000, 3, 3, N'HTO4')
INSERT dbo.HOADON(NGAYTHANHTOAN , TONGTIEN ,MA_PDP , MA_KH ,USERNAME) VALUES ( CAST(0x00009EC500843F9A AS DateTime), 19999.0000, 4, 4, N'HT06')
INSERT dbo.HOADON(NGAYTHANHTOAN , TONGTIEN ,MA_PDP , MA_KH ,USERNAME) VALUES ( CAST(0x00009EC50086B8AD AS DateTime), 19999.0000, 5, 5, N'HT05')

go
--SELECT * FROM dbo.PHONG WHERE STATUS!=0

SELECT * FROM dbo.HETHONG AS A JOIN dbo.NHANVIEN AS B 
ON B.MA_NV = A.MA_NV
WHERE A.USENAME='admin' AND A.PASSWORD='admin'


GO 
SELECT C.TIENDATCOC AS tiendatcoc, A.name AS name, A.MA_P AS idP,E.MOTA AS lp,E.GIA AS gia,E.SONGUOI AS songuoi,D.HOTEN AS tenkh,D.SDT AS sdt,D.CMT AS cmt,C.MA_PDP AS idpdp,C.SONGUOI AS slthue,C.NGAYDEN AS ngayden FROM dbo.PHONG AS A JOIN dbo.CHITIETDATPHONG AS B ON B.MA_P = A.MA_P JOIN dbo.PHIEUDATPHONG AS C ON  C.MA_PDP = B.MA_PDP JOIN dbo.KHACHHANG D ON D.MA_KH = C.MA_KH JOIN dbo.LOAIPHONG AS E ON E.MA_LP = A.MA_LP WHERE  B.MA_PDP=3

GO 
SELECT STATUS FROM dbo.PHONG WHERE MA_P=3

GO
SELECT A.MA_DV idDv,A.TEN ten,B.LOAIDICHVU loai,A.GIA gia,A.DONVITINH dvt,C.SOLUONG soluong FROM dbo.DICHVU  A JOIN dbo.LOAIDICHVU B ON B.MA_LDV = A.MA_LDV JOIN dbo.CHITIETDICHVU C ON C.MA_DV = A.MA_DV WHERE C.MA_PDP=3

UPDATE dbo.PHIEUDATPHONG SET NGAYDI=GETDATE(), STATUS=2 WHERE MA_PDP=3

GO
INSERT dbo.HOADON(  NGAYTHANHTOAN ,TONGTIEN , MA_PDP , MA_KH , USERNAME)VALUES  (  '6/12/2018' ,50000 , 3 ,  (SELECT MA_KH FROM dbo.PHIEUDATPHONG WHERE MA_PDP=3) ,  'admin') 
GO

INSERT dbo.HOADON(  NGAYTHANHTOAN ,TONGTIEN , MA_PDP , MA_KH , USERNAME)VALUES  ( '12/20/2018 9:50:52 AM' ,3 , 3 ,  (SELECT MA_KH FROM dbo.PHIEUDATPHONG WHERE MA_PDP=3) ,  'admin') 

SELECT A.MA_DV idDv,A.TEN ten,B.LOAIDICHVU loai,A.GIA gia,A.DONVITINH dvt FROM dbo.DICHVU  A JOIN dbo.LOAIDICHVU B ON B.MA_LDV = A.MA_LDV  WHERE A.STATUS=1
GO

SELECT * FROM dbo.LOAIDICHVU WHERE STATUS=1
SELECT * FROM dbo.DICHVU

INSERT dbo.DICHVU  (  TEN, GIA, DONVITINH, STATUS )VALUES  (  N'', 0.0, '',  1 )